<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0056)http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema3 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <title>
    Tema 3. Image processing    [CS Open CourseWare]
  </title>

  <meta name="generator" content="DokuWiki">
<meta name="robots" content="noindex,nofollow">
<meta name="date" content="2014-12-17T17:43:04+0200">
<meta name="keywords" content="programare,teme_2014b,tema3">
<link rel="search" type="application/opensearchdescription+xml" href="http://ocw.cs.pub.ro/courses/lib/exe/opensearch.php" title="CS Open CourseWare">
<link rel="start" href="http://ocw.cs.pub.ro/courses/">
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="http://ocw.cs.pub.ro/courses/feed.php">
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="http://ocw.cs.pub.ro/courses/feed.php?mode=list&ns=programare:teme_2014b">
<link rel="alternate" type="text/html" title="Plain HTML" href="http://ocw.cs.pub.ro/courses/_export/xhtml/programare/teme_2014b/tema3">
<link rel="canonical" href="./Tema 3. Image processing [CS Open CourseWare]_files/Tema 3. Image processing [CS Open CourseWare].html">
<link rel="stylesheet" type="text/css" href="./Tema 3. Image processing [CS Open CourseWare]_files/css.php">
<script type="text/javascript">/*<![CDATA[*/var NS='programare:teme_2014b';var JSINFO = {"id":"programare:teme_2014b:tema3","namespace":"programare:teme_2014b","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="./Tema 3. Image processing [CS Open CourseWare]_files/js.php"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script><script src="./Tema 3. Image processing [CS Open CourseWare]_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
<script type="text/x-mathjax-config;executed=true">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="./Tema 3. Image processing [CS Open CourseWare]_files/MathJax.js"></script>

  <link rel="shortcut icon" href="http://ocw.cs.pub.ro/courses/lib/tpl/arctic/images/favicon.ico">

  
<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style></head>
<body><div id="MathJax_Message" style="display: none;"></div>
<div id="wrapper" class="show">
  <div class="dokuwiki">

    
    <div class="stylehead">
      <div class="header">
        <div class="pagename">
          <a href="http://ocw.cs.pub.ro/courses/programare/"><img height="70" src="./Tema 3. Image processing [CS Open CourseWare]_files/sigla_pc.png"> </a>        </div>
        <div class="logo">
          <a style="color: #AAA !important;" href="http://ocw.cs.pub.ro/courses/">Open CourseWare</a>        </div>
      </div>
    
       
      <div class="breadcrumbs">
              </div>
      
            </div>

                  <div class="bar" id="bar__top">
        <div class="bar-left">
                  </div>
        <div class="bar-right">
          <a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema3?do=login&sectok=d1f5c64402da1dc4b40995c37bdcf78d" class="action login" rel="nofollow" title="Login">Login</a>        </div>
    </div>
        
    
    
    
              <div class="left_page">
          
<h2 class="sectionedit1" id="tema_3_image_processing">Tema 3. Image processing</h2>
<div class="level2">

<p>
<strong>Responsabil:</strong> <a href="mailto:calin@rosedu.org" class="mail" title="calin@rosedu.org">Călin Cruceru</a><br>

<strong>Deadline:</strong> 23:59:59 20.01.2015<br>

<strong>Scopul temei:</strong>
</p>
<ul>
<li class="level1"><div class="li"> utilizarea structurilor de date</div>
</li>
<li class="level1"><div class="li"> lucrul cu fișiere, atât text, cât și binare</div>
</li>
<li class="level1"><div class="li"> abordarea cu pași mici a unei probleme mai complexe</div>
</li>
</ul>

</div>

<h3 class="sectionedit2" id="introducere">Introducere</h3>
<div class="level3">

<p>
Procesarea de imagini este un domeniu foarte vast în computer science, aflat în strânsă legătură cu alte domenii precum <a href="http://en.wikipedia.org/wiki/Computer_graphics" class="urlextern" title="http://en.wikipedia.org/wiki/Computer_graphics" rel="nofollow">computer graphics</a> și <a href="http://en.wikipedia.org/wiki/Computer_vision" class="urlextern" title="http://en.wikipedia.org/wiki/Computer_vision" rel="nofollow">computer vision</a>.
</p>

<p>
Cu toții ați auzit de <strong>face detection</strong> și de device-urile sau aplicațiile care îl integrează printre feature-urile lor și pe acesta. Câteva exemple sunt: focalizarea, înainte de a face o poză, pe smartphone-uri/camere foto, facebook, care îți recomandă să îți tăguiești prietenii din poză, marcându-le fața într-un chenar, etc.
</p>

<p>
Ne propunem să simulăm, la un nivel simplificat, algoritmul care stă în spatele <strong>face detection</strong>-ului, având ca use case <strong>protejarea identității</strong>, prin <strong>blur</strong>-area fețelor detectate (puteți lua ca exemplu Street View-ul de la Google Maps). De ce simplificat? Deoarece complexitatea algoritmilor care fac asta ar depăși scopul acestui curs și ar fi, de asemenea, și foarte greu de automatizat testarea unei astfel de procesări.
</p>

<p>
<a href="http://ocw.cs.pub.ro/courses/_detail/programare/teme_2014/tema3-face-blurring.png?id=programare%3Ateme_2014b%3Atema3" class="media" title="programare:teme_2014:tema3-face-blurring.png"><img src="./Tema 3. Image processing [CS Open CourseWare]_files/tema3-face-blurring.png" class="media" title="Google Street View - Face Blurring" alt="Google Street View - Face Blurring"></a><br>

<em>Imagine preluată de pe <a href="http://www.cnet.com/news/google-begins-blurring-faces-in-street-view/" class="urlextern" title="http://www.cnet.com/news/google-begins-blurring-faces-in-street-view/" rel="nofollow">cnet.com</a></em>
</p>

</div>

<h3 class="sectionedit3" id="structura_formatului_bmp">Structura formatului BMP</h3>
<div class="level3">

<p>
Vom lucra cu fișiere <strong><a href="http://en.wikipedia.org/wiki/BMP_file_format" class="urlextern" title="http://en.wikipedia.org/wiki/BMP_file_format" rel="nofollow">BMP</a></strong>, deci, cu <strong>fișiere binare</strong>. 
</p>

<p>
O imagine BMP are următoarea structură:
</p>
<ul>
<li class="level1"><div class="li"> un <strong>File Header</strong> care are următoarele câmpuri:</div>
<ol>
<li class="level3"><div class="li"> <strong>signature</strong> – 2 octeți - literele 'B' și 'M' în <abbr title="American Standard Code for Information Interchange">ASCII</abbr>;</div>
</li>
<li class="level3"><div class="li"> <strong>file size</strong> – 4 octeți – dimensiunea întregului fișier;</div>
</li>
<li class="level3"><div class="li"> <strong>reserved</strong> – 4 octeți – nefolosit;</div>
</li>
<li class="level3"><div class="li"> <strong>offset</strong> – 4 octeți – offsetul de la începutul fișierului până la începutului bitmap-ului, adica al matricii de pixeli.</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> un <strong>Info Header</strong> care poate avea structuri diferite, însă noi vom lucra cu cel care se numește <strong>BITMAPINFOHEADER</strong>. Are următoarele câmpuri:</div>
<ol>
<li class="level3"><div class="li"> <strong>size</strong> – 4 octeți – dimensiunea Info Header-ului, care are o valoare fixă, 40;</div>
</li>
<li class="level3"><div class="li"> <strong>width</strong> – 4 octeți – lățimea matricii de pixeli (numărul de coloane);</div>
</li>
<li class="level3"><div class="li"> <strong>height</strong> – 4 octeți – înălțimea matricii de pixeli (numărul de rânduri);</div>
</li>
<li class="level3"><div class="li"> <strong>planes</strong> – 2 octeți – setat la valoarea fixă 1;</div>
</li>
<li class="level3"><div class="li"> <strong>bit count</strong> – 2 octeți – numărul de biți per pixel. În cazul nostru va avea mereu valoarea 24, adică reprezentăm fiecare pixel pe 3 octeți, adică cele 3 canale, RGB;</div>
</li>
<li class="level3"><div class="li"> <strong>compression</strong> – 4 octeți – tipul de compresie. Acest câmp va fi 0;</div>
</li>
<li class="level3"><div class="li"> <strong>image size</strong> – 4 octeți – se referă la dimensiunea matricii de pixeli, inclusiv padding-ul adăugat (vedeți mai jos);</div>
</li>
<li class="level3"><div class="li"> <strong>x pixels per meter</strong> – 4 octeți – se referă la rezoluția de printare. Pentru a simplifica puțin tema, veți seta acest câmp pe 0. Nu o să printăm imaginile :).</div>
</li>
<li class="level3"><div class="li"> <strong>y pixels per meter</strong> – la fel ca mai sus;</div>
</li>
<li class="level3"><div class="li"> <strong>colors used</strong> – numărul de culori din paleta de culori. Aceasta este o secțiune care va lipsi din imaginile noastre BMP, deoarece ea se află în general imediat după <strong>Info Header</strong> însă doar pentru imaginile care au câmpul <strong>bit count</strong> mai mic sau egal cu 8. Prin urmare, câmpul va fi setat pe 0;</div>
</li>
<li class="level3"><div class="li"> <strong>colors important</strong> – numărul de culori importante. Va fi, de asemenea, setat pe 0, ceea ce înseamnă că toate culorile sunt importante.</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> <strong>BitMap</strong>-ul, care este matricea de pixeli și care ocupă cea mai mare parte din fișier. Trei lucruri trebuiesc menționate despre aceasta:</div>
<ol>
<li class="level3"><div class="li"> pixelii propriu-ziși se află într-o matrice de dimensiune <strong>width x height</strong>, însă ea poate avea o dimensiune mai mare de atât din cauza <strong>paddingului</strong>. Acest padding este adăugat la sfârșitul fiecărei linii astfel încat fiecare linie să înceapă de la o adresă (offset față de începutul fișierului) multiplu de 4. Mare atenție la citire, pentru că acest padding trebuie <strong>ignorat</strong> (fseek). De asemenea, la scriere va trebui să puneți <strong>explicit</strong> valoarea 0 pe toți octeții de padding.</div>
</li>
<li class="level3"><div class="li"> este <strong>răsturnată</strong>, ceea ce înseamnă că prima linie în matrice conține de fapt pixelii din extremitatea de jos a imaginii. Vedeți exemplul de mai jos;</div>
</li>
<li class="level3"><div class="li"> canelele pentru fiecare pixel sunt în ordinea BGR (<strong>B</strong>lue <strong>G</strong>reen <strong>R</strong>ed).</div>
</li>
</ol>
</li>
</ul>

<p>
Header-ele pe care le puteți folosi în implementare se află în scheletul de cod asociat temei.
</p><p></p><div class="noteimportant">
<strong>ATENȚIE</strong> în special la cea de-a 3a cerință, pentru care va trebui să faceți mai multe modificări în header-ele asociate imaginii input: <strong>file size</strong>, <strong>width</strong>, <strong>height</strong>, <strong>image size</strong>. La acestea se adaugă și câmpurile <strong>x pixels per meter</strong> și <strong>y pixels per meter</strong> care se vor seta pe 0.

</div><p></p>
<p></p><div class="notetip">
Următiți cu foarte mare atenție exemplul de <a href="http://en.wikipedia.org/wiki/BMP_file_format#Example_1" class="urlextern" title="http://en.wikipedia.org/wiki/BMP_file_format#Example_1" rel="nofollow">aici</a> și încercați să înțelegeți cum e reprezentată o imagine BMP <strong>înainte</strong> de a începe implementarea. Dacă e ceva neclar, puteți întreba oricând pe forum.

</div><p></p>
<p></p>

</div>

<h3 class="sectionedit4" id="cerinte">Cerințe</h3>
<div class="level3">

<p>
Cum simulăm de fapt procedeul de <strong>face detection</strong>? Știm că în format BMP, o imagine nu este altceva decât o matrice de pixeli. Astfel, a identifica fața unei persoane într-o imagine, la un nivel simplificat, ar însemna identificarea zonei din imagine care are toți pixelii într-un interval dat de un pixel referință și un pixel offset (dați ca input în această temă). O <strong>zonă</strong>, în acest caz, e definită ca o mulțime de pixeli adiacenți din imagine (sau poziții vecine în matrice). Această zonă nu este necesar să aibă o formă regulată.
</p>

<p>
Observați cum simplificăm modul în care funcționează <strong>face detection</strong>-ul în aplicațiile reale, prin faptul că oferim ca input valorile RGB ale unui pixel. Acesta este și motivul pentru care nu vom putea folosi ca input “poze reale”, deoarece culoarea pielii diferă, în realitate, de luminozitatea externă, calitatea camerei foto, etc. Prin urmare, nu vă așteptați la efecte vizuale impresionante.
</p>

<p>
O să îi spunem <strong>cluster</strong> zonei din imagine despre care vorbeam mai sus și o să numim un pixel <strong>valid</strong> dacă se află în intervalul dat de pixelul referință și cel offset. Prin urmare, un pixel dat prin valorile sale RGB <strong>(Rv, Gv, Bv)</strong>, este <strong>valid</strong>, dacă și numai dacă, dându-se 2 pixeli numiți <strong>referință</strong> <strong>(Rr, Gr, Br)</strong> și <strong>offset</strong> <strong>(Ro, Go, Bo)</strong>, următoarele inegalități sunt adevărate.
</p>

<p>

</p><pre><b>
Rr – Ro &lt;= Rv &lt;= Rr + Ro
Gr – Go &lt;= Gv &lt;= Gr + Go
Br – Bo &lt;= Bv &lt;= Br + Bo
</b>
</pre>

<p></p>

<p>
Luăm ca exemplul imaginea dată prin matricea de mai jos, care are 30 pixeli (am folosit parantezele pentru a delimita pixelii).
</p>

<p>

</p><pre>(255 0 0) (225 0 0) (240 0 0) (0 0 0)   (0 0 0)   (0 0 0)   <b>2 bytes padding</b>
(240 0 0) (225 0 0) (250 0 0) (245 0 0) (0 0 0)   (0 0 0)   <b>2 bytes padding</b>
(240 0 0) (0 0 0)   (0 0 0)   (0 0 0)   (255 0 0) (0 0 0)   <b>2 bytes padding</b>
(0 0 0)   (0 0 0)   (0 0 0)   (240 0 0) (240 0 0) (240 0 0) <b>2 bytes padding</b>
(0 0 0)   (0 0 0)   (0 0 0)   (0 0 0 )  (0 0 0)   (0 0 0)   <b>2 bytes padding</b>
</pre>

<p></p>

<p>
Dacă pixelul referință ar avea valoarea <strong>(240, 0, 0)</strong>, iar cel offset <strong>(15, 0, 0)</strong>, atunci numărul de clustere ar fi <strong>2</strong> (vezi exemplul de mai jos). Dacă, în schimb, pixelul referință ar avea valoarea <strong>(100, 15, 1)</strong>, iar cel offset ar rămâne la fel, numarul de clustere ar fi <strong>0</strong>. În cele din urmă, dacă pixelul referință ar fi <strong>(240, 0, 0)</strong>, iar cel offset <strong>(0, 0, 0)</strong>, numărul de clustere ar fi <strong>3</strong>.
</p>

</div>

<h5 id="cerinta_1_clustere_30_puncte">Cerința 1 – Clustere (30 puncte)</h5>
<div class="level5">

<p>
Să se afișeze în ordine crescătoare dimensiunile clusterelor  de pixeli care se află în intervalul determinat de pixelii referință și offset dați ca input. Se vor considera doar clusterele în care se găsesc <strong>cel puțin P*Height*Width</strong> pixeli, unde <strong>P</strong> este un procent dat ca input. Cu alte cuvinte, nu ne interesează acele clustere care au <em>prea puțini</em> pixeli.
</p>

<p>
<strong>Exemplul 1:</strong>
În cazul imaginii date prin matricea de mai sus, cu cei 2 pixeli având valorile <strong>(240, 0, 0)</strong> și <strong>(15, 0, 0)</strong> și cu <strong>P = 0.1</strong>, outputul ar trebui să fie:
</p>
<pre class="code">4 8</pre>

<p>
Cele 2 clustere evidențiate, în matricea de mai sus, sunt (o să ignorăm paddingul în exemplele următoare):
</p>

<p>

</p><pre><b>(255 0 0) (225 0 0) (240 0 0)</b> (0 0 0)   (0 0 0)   (0 0 0)
<b>(240 0 0) (225 0 0) (250 0 0) (245 0 0)</b> (0 0 0)   (0 0 0)
<b>(240 0 0)</b> (0 0 0)   (0 0 0)   (0 0 0)   <span style="color:red">(255 0 0)</span> (0 0 0)
(0 0 0)   (0 0 0)   (0 0 0)   <span style="color:red">(240 0 0) (240 0 0) (240 0 0)</span>
(0 0 0)   (0 0 0)   (0 0 0)   (0 0 0)   (0 0 0)   (0 0 0)
</pre>

<p></p>

<p>
</p><p></p><div class="noteimportant">
<strong>Observați</strong> cum 2 pixeli nu fac parte din același cluster dacă se învecinează pe diagonală.

</div><p></p>
<p></p>

<p>
<strong>Exemplul 2:</strong>
În schimb, dacă am schimba pixelul offset în <strong>(10, 0, 0)</strong>, atunci outputul ar trebui să fie:
</p>
<pre class="code">3 3</pre>

<p>
Cele 2 clustere evidențiate cu roșu și albastru, din matricea de mai sus, sunt:
</p>

<p>

</p><pre>(255 0 0) (225 0 0) <span style="color:blue">(240 0 0)</span> (0 0 0)   (0 0 0)   (0 0 0)
<span style="color:green">(240 0 0)</span> (225 0 0) <span style="color:blue">(250 0 0) (245 0 0)</span> (0 0 0)   (0 0 0)
<span style="color:green">(240 0 0)</span> (0 0 0)   (0 0 0)   (0 0 0)   (255 0 0) (0 0 0)
(0 0 0)   (0 0 0)   (0 0 0)   <span style="color:red">(240 0 0) (240 0 0) (240 0 0)</span>
(0 0 0)   (0 0 0)   (0 0 0)   (0 0 0 )  (0 0 0)   (0 0 0)
</pre>

<p></p><div class="noteimportant">
<strong>Observați</strong> cum nu ne interesează clusterul care are 2 pixeli (marcat cu verde), deoarece P*Height*Width = 0.1 * 5 * 6 = <strong>3 &gt; 2</strong>.

</div><p></p>
<p></p>

</div>

<h5 id="cerinta_2_-_blur_30_puncte">Cerința 2 - Blur (30 puncte)</h5>
<div class="level5">

<p>
Se cere <strong>blur</strong>-area clusterelor identificate la cerința anterioară. Efectul de blur presupune înlocuirea fiecărui pixel care face parte dintr-un cluster cu media aritmetică a vecinilor săi (stânga, dreapta, jos, sus).
</p>

<p>
</p><p></p><div class="noteimportant">
<strong>Atenție!</strong> Aceeași regulă se aplică și pentru pixelii care se află la “marginea” clusterului, chiar dacă asta presupune însumarea a unuia, până la 3, pixeli care se află în afara clusterului.

</div><p></p>
<p></p>

<p>
Pentru ca efectul să fie vizibil, acest proces se va repeta de <strong>100</strong> ori.
</p>

<p>
<strong>Exemplu:</strong>
Considerăm inputul de la exemplul 2, cerința 1. După o iterațe, matricea de pixeli ar trebui să fie următoarea:
</p>

<p>

</p><pre>(255 0 0) (225 0 0) <span style="color:blue">(158 0 0)</span> (0 0 0)  (0 0 0)   (0 0 0)
<span style="color:green">(240 0 0)</span> (225 0 0) <span style="color:blue">(177 0 0) (62 0 0)</span> (0 0 0)   (0 0 0)
<span style="color:green">(240 0 0)</span> (0 0 0)   (0 0 0)   (0 0 0)  (255 0 0) (0 0 0)
(0 0 0)   (0 0 0)   (0 0 0)   <span style="color:red">(60 0 0) (183 0 0) (80 0 0)</span>
(0 0 0)   (0 0 0)   (0 0 0)   (0 0 0 ) (0 0 0)   (0 0 0)
</pre>

<p></p>

<p>
Procedeul se continuă pentru încă 99 iterații.
</p><p></p><div class="noteimportant">
<strong>Observați</strong> că aplicăm efectul de blur doar pe clusterele identificate la cerința 1, exemplul 2.

</div><p></p>
<p></p>

</div>

<h5 id="cerinta_3_crop_40_puncte">Cerința 3 – Crop (40 puncte)</h5>
<div class="level5">

<p>
Să se decupeze clusterele identificate la prima cerință. <strong>Neblurate</strong>!
</p>

<p>
Ne dorim, însă, ca maginile rezultate să aibă o formă regulată, de dreptunghi. Pentru asta, ceea ce va trebui să “tăiați” pentru fiecare cluster este <strong>cel mai mic dreptunghi</strong> care îl cuprinde.
</p>

<p>
<strong>Exemplu:</strong>
Luând ca input matricea de pixeli de la exemplul 1, prima cerință, noile imagini care <em>conțin</em> clusterele identificate vor avea următoarele matrici de pixeli:
</p>

<p>
<strong>Imaginea 1:</strong>

</p><pre><b>(255 0 0) (225 0 0) (240 0 0)</b> (0 0 0)     
<b>(240 0 0) (225 0 0) (250 0 0) (245 0 0)</b>
<b>(240 0 0)</b> (0 0 0)   (0 0 0)   (0 0 0)
</pre>

<p></p>

<p>
<strong>Imaginea 2:</strong>

</p><pre>(0 0 0)   <span style="color:red">(255 0 0)</span> (0 0 0)
<span style="color:red">(240 0 0) (240 0 0) (240 0 0)</span>
</pre>

<p></p>

</div>

<h3 class="sectionedit5" id="formatul_datelor_de_intrare_si_de_iesire">Formatul datelor de intrare și de ieșire</h3>
<div class="level3">

<p>
Datele de intrare se vor citi din fișierul <strong>input.txt</strong>, care va avea următoarea structură:
</p>
<pre class="code">image.bmp
240 0 0
15 0 0
0.1</pre>
<ul>
<li class="level1"><div class="li"> <strong>image.bmp</strong> este imaginea care va fi prelucrată;</div>
</li>
<li class="level1"><div class="li"> <strong>240 0 0</strong> este pixelul <strong>referință</strong>;</div>
</li>
<li class="level1"><div class="li"> <strong>15 0 0</strong> este pixelul <strong>offset</strong>;</div>
</li>
<li class="level1"><div class="li"> <strong>0.1</strong> este procentul <strong>P</strong>.</div>
</li>
</ul>

<p>
În ceea ce privește datele de ieșire:
</p>
<ul>
<li class="level1"><div class="li"> outputul <strong>cerinței 1</strong> se va afișa în fișierul <strong>output.txt</strong>;</div>
</li>
<li class="level1"><div class="li"> pentru <strong>cerința 2</strong>, dacă imaginea input se numește <strong>image.bmp</strong>, atunci outputul va fi <strong>image_blur.bmp</strong>;</div>
</li>
<li class="level1"><div class="li"> pentru <strong>cerința 3</strong>, numele imaginilor rezultate, dacă fișierul (imaginea) de intrare se numește <strong>image.bmp</strong>, vor fi: image_crop<strong>1</strong>.bmp, image_crop<strong>2</strong>.bmp, …, image_crop<strong>[n]</strong>.bmp, unde <strong>[n]</strong> este numărul de clustere identificate la cerința 1.</div>
</li>
</ul>

</div>

<h3 class="sectionedit6" id="observatii">Observații</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Nu folosiți variabile globale;</div>
</li>
<li class="level1"><div class="li"> Fiți consistenți în ceea ce privește <strong>coding style-ul</strong>;</div>
</li>
<li class="level1"><div class="li"> Modularizați pe cât de mult posibil codul – folosiți <strong>funcții</strong> și <strong>struct</strong>-uri;</div>
</li>
<li class="level1"><div class="li"> Aveți mare atenție când lucrati cu formatul BMP. Citiți bine descrierea formatului și a header-elor;</div>
</li>
<li class="level1"><div class="li"> Aveți mare atenție în special la cerința 3, când scrieți header-ele specifice BMP în imaginile output, deoarece câmpurile care se referă la dimensiunea fișierului/matricii de pixeli se vor modifica.</div>
</li>
<li class="level1"><div class="li"> Încercați să aveți o abordare sistematică și cu pași mici dar siguri. Testați fiecare pas. Spre exemplu, înainte de a implementa cerințele propriu-zise, <strong>testați</strong> dacă ați citit corect matricea de pixeli. Apoi, pentru cerința 1 gândiți-vă la algoritmul prin care determinați <strong>mulțimile</strong> de pixeli adjuncți și asigurați-vă că funcționează corect înainte de a trece mai departe, etc.</div>
</li>
</ul>

</div>

<h3 class="sectionedit7" id="mentiuni">Mențiuni</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Dimensiunile imaginilor nu vor depăși <strong>2000×2000</strong>;</div>
</li>
<li class="level1"><div class="li"> Se garantează faptul că inputul este corect, adică imaginea există și are formatul BMP, valorile RGB pentru <strong>pixelul referință</strong> și pentru <strong>pixelul offset</strong> se încadrează într-un unsigned char, iar procentul <strong>P</strong> este un real în intervalul <strong>(0, 1]</strong>;</div>
</li>
<li class="level1"><div class="li"> Se garantează faptul ca P*Height*Width este un număr întreg. Aveți totuși grijă la casturile implicite;</div>
</li>
<li class="level1"><div class="li"> Tema va fi uploadată pe vmchecker și va fi corectată cu testerul local pus la dispoziție <strong>în curând</strong> la resurse;</div>
</li>
<li class="level1"><div class="li"> Nu există limită de timp pe vmchecker, însă programul vostru ar trebui să se termine pe fiecare test în mai puțin de 5-7 secunde;</div>
</li>
<li class="level1"><div class="li"> Arhiva pentru vmchecker va conține direct în rădăcina arhivei:</div>
<ol>
<li class="level3"><div class="li"> <strong>Makefile</strong>, cu cel puțin 2 targeturi, <strong>build</strong> și <strong>clean</strong>;</div>
</li>
<li class="level3"><div class="li"> <strong>sursele</strong> voastre, adică fișierele .c și .h;</div>
</li>
<li class="level3"><div class="li"> <strong>README</strong>, în care trebuie să dați detalii despre implementare, de ce ați ales să rezolvați într-un anumit fel, etc.</div>
</li>
</ol>
</li>
</ul>

<p>
</p><p></p><div class="notewarning">Toate soluțiile vor fi verificate folosind o unealtă de detectare a plagiatului. În cazul detectării unui astfel de caz, atât plagiatorul cât și autorul original vor primi punctaj 0 pe temă și nu li se va permite intrarea în examen.
</div><p></p>
<p></p>

</div>

<h3 class="sectionedit8" id="testare_locala">Testare locală</h3>
<div class="level3">

<p>
Puteti descărca de <a href="http://ocw.cs.pub.ro/courses/_media/programare/teme_2014/bmp_header.h.tar.gz" class="media mediafile mf_gz" title="programare:teme_2014:bmp_header.h.tar.gz">aici</a> scheletul de cod inițial ce conține doar structurile specifice formatului bmp.<br>

<strong>[În curând]</strong> Checker și teste pentru testare locală.
</p>

</div>

        </div>
        <div class="right_sidebar">
          <form action="http://ocw.cs.pub.ro/courses/start" accept-charset="utf-8" class="search" id="dw__search" method="get"><div class="no"><input type="hidden" name="do" value="search"><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]"><input type="submit" value="Search" class="button" title="Search"><div id="qsearch__out" class="ajax_qsearch JSpopup" style="display: none;"></div></div></form>          <div class="namespace_sidebar sidebar_box">

<h2 class="sectionedit9" id="resurse_generale">Resurse generale</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://ocw.cs.pub.ro/courses/programare/regulament" class="wikilink1" title="programare:regulament">Regulament</a> <br>
</div>
</li>
<li class="level1"><div class="li"> <a href="http://ocw.cs.pub.ro/courses/programare/punctaj" class="wikilink1" title="programare:punctaj">Punctaj</a> <br>
</div>
</li>
<li class="level1"><div class="li"> <a href="http://ocw.cs.pub.ro/courses/programare/catalog" class="wikilink1" title="programare:catalog">Catalog laborator</a> <br>
</div>
</li>
<li class="level1"><div class="li"> <a href="http://ocw.cs.pub.ro/courses/programare/coding-style" class="wikilink1" title="programare:coding-style">Coding style</a> <br>
</div>
</li>
</ul>

</div>
<!-- EDIT9 SECTION "Resurse generale" [1-208] -->
<h2 class="sectionedit10" id="cursuri">Cursuri</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> 
</div>
<!-- EDIT11 PLUGIN_INCLUDE_START "programare:cursuri" [0-] --><div class="plugin_include_content plugin_include__programare:cursuri">
<div class="level2">

<p>
<a href="http://ocw.cs.pub.ro/courses/programare/cursuri/sylabus" class="wikilink1" title="programare:cursuri:sylabus">Continutul Tematic</a> <br>

</p>

</div>
<!-- EDIT13 PLUGIN_INCLUDE_EDITBTN "programare:cursuri" [0-] --><!-- EDIT12 PLUGIN_INCLUDE_END "programare:cursuri" [0-] --></div>
<div class="level2">
</div>
</li>
</ul>

</div>
<!-- EDIT10 SECTION "Cursuri" [209-281] -->
<h2 class="sectionedit14" id="laboratoare">Laboratoare</h2>
<div class="level2">

</div>
<!-- EDIT15 PLUGIN_INCLUDE_START "programare:laboratoare" [0-] --><div class="plugin_include_content plugin_include__programare:laboratoare">
<div class="level2">

<p>
<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab01" class="wikilink1" title="programare:laboratoare:lab01">01. Unelte de programare</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab02" class="wikilink1" title="programare:laboratoare:lab02">02. Tipuri de date. Operatori.</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab03" class="wikilink1" title="programare:laboratoare:lab03">03. Instrucțiunile limbajului C</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab04" class="wikilink1" title="programare:laboratoare:lab04">04. Funcții</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab05" class="wikilink1" title="programare:laboratoare:lab05">05. Tablouri. Particularizare - vectori</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab06" class="wikilink1" title="programare:laboratoare:lab06">06. Matrice. Operații cu matrice</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab07" class="wikilink1" title="programare:laboratoare:lab07">07. Pointeri. Abordarea lucrului cu tablouri folosind pointeri</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab08" class="wikilink1" title="programare:laboratoare:lab08">08. Alocarea dinamică a memoriei. Aplicaţii folosind tablouri şi matrice</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab09" class="wikilink1" title="programare:laboratoare:lab09">09. Prelucrarea şirurilor de caractere. Funcţii. Aplicaţii</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab10" class="wikilink1" title="programare:laboratoare:lab10">10. Structuri. Uniuni. Aplicație: Matrice rare</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab11" class="wikilink1" title="programare:laboratoare:lab11">11. Operatii cu fişiere. Aplicaţii folosind fişiere.</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab12" class="wikilink1" title="programare:laboratoare:lab12">12. Parametrii liniei de comandă. Preprocesorul. Funcţii cu număr variabil de parametri</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab13" class="wikilink1" title="programare:laboratoare:lab13">13. Recapitulare</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab14" class="wikilink1" title="programare:laboratoare:lab14">14. Probleme diverse</a> <br>

<a href="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab12cb" class="wikilink1" title="programare:laboratoare:lab12cb">12.(CB) Laborator final</a> <br>

</p>

</div>
<!-- EDIT17 PLUGIN_INCLUDE_EDITBTN "programare:laboratoare" [0-] --><!-- EDIT16 PLUGIN_INCLUDE_END "programare:laboratoare" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT14 SECTION "Laboratoare" [282-426] -->
<h2 class="sectionedit18" id="teme_de_casaseria_ca_2014-2015">Teme de casă: seria CA (2014-2015)</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://ocw.cs.pub.ro/courses/programare/teme_2014/tema1" class="wikilink1" title="programare:teme_2014:tema1">Tema 1</a> <br>
</div>
</li>
<li class="level1"><div class="li"> <a href="http://ocw.cs.pub.ro/courses/programare/teme_2014/tema2" class="wikilink1" title="programare:teme_2014:tema2">Tema 2</a> <br>
</div>
</li>
<li class="level1"><div class="li"> <a href="http://ocw.cs.pub.ro/courses/programare/teme_2014/tema3_new" class="wikilink1" title="programare:teme_2014:tema3_new">Tema 3</a> <br>
</div>
</li>
<li class="level1"><div class="li"> <a href="http://ocw.cs.pub.ro/courses/programare/teme_2014/tema4_ca" class="wikilink1" title="programare:teme_2014:tema4_ca">Tema 4</a> <br>
</div>
</li>
</ul>

</div>
<!-- EDIT18 SECTION "Teme de casă: seria CA (2014-2015)" [427-1103] -->
<h2 class="sectionedit19" id="teme_de_casaseria_cb_2014-2015">Teme de casă: seria CB (2014-2015)</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://ocw.cs.pub.ro/courses/programare/teme/general" class="wikilink1" title="programare:teme:general"> Indicații generale</a> <br>
</div>
</li>
<li class="level1"><div class="li"> <a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema1" class="wikilink1" title="programare:teme_2014b:tema1">Tema 1</a> <br>
</div>
</li>
<li class="level1"><div class="li"> <a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema2" class="wikilink1" title="programare:teme_2014b:tema2">Tema 2</a> <br>
</div>
</li>
<li class="level1"><div class="li"> <span class="curid"><a href="./Tema 3. Image processing [CS Open CourseWare]_files/Tema 3. Image processing [CS Open CourseWare].html" class="wikilink1" title="programare:teme_2014b:tema3">Tema 3</a></span> <br>
</div>
</li>
</ul>

</div>
<!-- EDIT19 SECTION "Teme de casă: seria CB (2014-2015)" [1104-] -->
</div>
<div class="toc_sidebar sidebar_box">
<!-- TOC START -->
<div id="sb__right__dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level2"><div class="li"><a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema3#tema_3_image_processing">Tema 3. Image processing</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema3#introducere">Introducere</a></div></li>
<li class="level3"><div class="li"><a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema3#structura_formatului_bmp">Structura formatului BMP</a></div></li>
<li class="level3"><div class="li"><a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema3#cerinte">Cerințe</a></div></li>
<li class="level3"><div class="li"><a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema3#formatul_datelor_de_intrare_si_de_iesire">Formatul datelor de intrare și de ieșire</a></div></li>
<li class="level3"><div class="li"><a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema3#observatii">Observații</a></div></li>
<li class="level3"><div class="li"><a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema3#mentiuni">Mențiuni</a></div></li>
<li class="level3"><div class="li"><a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema3#testare_locala">Testare locală</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
</div>
        </div>
      
    
      <div class="stylefoot">
        <div class="meta">
          <div class="user">
                    </div>
          <div class="doc">
          programare/teme_2014b/tema3.txt · Last modified: 2014/12/17 17:43 by calin.cruceru          </div>
        </div>
      </div>

    <div class="clearer"></div>

    
                <div class="bar" id="bar__bottom">
      <div class="bar-left">
        <a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema3?do=revisions" class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]">Old revisions</a>      </div>
      <div class="bar-right">
        <a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema3?do=media" class="action media" rel="nofollow" title="Media Manager">Media Manager</a><a href="http://ocw.cs.pub.ro/courses/programare/teme_2014b/tema3#dokuwiki__top" class="action top" accesskey="t" rel="nofollow" title="Back to top [T]">Back to top</a>      </div>
    </div>
    <div class="clearer"></div>
            
    <div align="center" class="footerinc">
  <div class="license"><a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="./Tema 3. Image processing [CS Open CourseWare]_files/cc-by-sa.png" alt="CC Attribution-Share Alike 3.0 Unported"></a></div>
  <a target="_blank" href="http://www.chimeric.de/" title="www.chimeric.de"><img src="./Tema 3. Image processing [CS Open CourseWare]_files/button-chimeric-de.png" width="80" height="15" alt="www.chimeric.de" border="0"></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="./Tema 3. Image processing [CS Open CourseWare]_files/button-css.png" width="80" height="15" alt="Valid CSS" border="0"></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="./Tema 3. Image processing [CS Open CourseWare]_files/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0"></a>

  <a target="_blank" href="http://www.firefox-browser.de/" title="do yourself a favour and use a real browser - get firefox"><img src="./Tema 3. Image processing [CS Open CourseWare]_files/button-firefox.png" width="80" height="15" alt="do yourself a favour and use a real browser - get firefox!!" border="0"></a>
  
  <a target="_blank" href="http://ocw.cs.pub.ro/courses/feed.php" title="Recent changes RSS feed"><img src="./Tema 3. Image processing [CS Open CourseWare]_files/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0"></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="./Tema 3. Image processing [CS Open CourseWare]_files/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0"></a>
</div>

  </div>
</div>

<div class="no"><img src="./Tema 3. Image processing [CS Open CourseWare]_files/indexer.php" width="2" height="1" alt=""></div>


</body></html>